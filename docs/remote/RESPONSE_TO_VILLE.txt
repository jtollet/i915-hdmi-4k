Subject: Re: [PATCH] drm/i915/hdmi: Add SCDC timing delays for 4K@60Hz scrambling

Hi Ville,

Thanks for the feedback! You were absolutely right to question the placement of 
the delay. I've systematically tested moving the delay earlier in the modeset 
sequence as you suggested, and the results are quite interesting.

## Test Methodology

I created 4 test patches, progressively moving the 150ms delay earlier in the
intel_ddi_enable_hdmi() sequence:

Test 1: Before intel_ddi_buf_enable() (line ~3504)
Test 2: Before intel_ddi_power_up_lanes() (line ~3466)
Test 3: After encoder->set_signal_levels() (line ~3429)
Test 4: After hsw_prepare_hdmi_ddi_buffers() (line ~3424)

## Results

All four tests succeeded! The 4K@60Hz display initialized correctly regardless 
of where the delay was placed in the sequence.

## Interpretation

This suggests the timing is NOT tied to any specific PHY/DDI operation. Instead,
the monitor (Cisco Desk Pro in my case) needs ~150ms to process the initial SCDC
configuration sent by intel_hdmi_handle_sink_scrambling() before any subsequent
operations begin.

The HDMI 2.0 spec (section 10.4.1.7) mentions monitors can disable scrambling if
they don't detect a scrambled signal within 100ms. It appears some monitors need
additional time to PREPARE their scrambling detection logic, not just to detect
the signal itself.

## Recommendation

Given these results, I propose placing the delay immediately after the
intel_hdmi_handle_sink_scrambling() call (earliest possible point). This makes
the code intent clear: we're giving the monitor time to process SCDC config
before PHY initialization begins.

Would you like me to submit a v2 patch with this placement? I can also test
with shorter delays (100ms, 125ms) to find the minimum required value.

Best regards,
Jerome

Hardware tested:
- Intel Alder Lake-N N100 (Gen 12.0)
- Cisco Desk Pro monitor (HDMI 2.0)
- 3840x2160@60Hz (594 MHz, scrambling enabled)
